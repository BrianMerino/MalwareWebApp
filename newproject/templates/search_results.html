<!-- templates/search_results.html-->
{% extends 'base.html' %}

{% block content %}
<div class="container p-3 my-3 text-white" id="textBackground">
<h2>Search Results for</h2><h3>'{{ object_list.query }}'</h3>
</div>

<div class="container p-3 my-3 text-white" id="textBackground">

    {% if object_list.paginator.has_other_pages %}
  <ul class="pagination">
    {% if object_list.paginator.has_previous %}
      <li><a href="?page={{ object_list.paginator.previous_page_number }}&q={{ object_list.query }}" style="font-size: 50px;">&#8678;</a></li>
    {% else %}
      <li style="font-size: 50px;" class="disabled"><span>&#8678;</span></li>
    {% endif %}
    {% for i in object_list.paginator.page_range %}
      {% if object_list.paginator.number == i %}
        <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></span></li>
      {% else %}
        <li><a href="?page={{ i }}">{{ i }}</a></li>
      {% endif %}
    {% endfor %}
    {% if object_list.paginator.has_next %}
      <li style="font-size: 25px;">Page {{ object_list.current_page }} of {{ object_list.totalpages }}<a href="?page={{ object_list.paginator.next_page_number }}&q={{ object_list.query }}" style="font-size: 50px;">&#8680;</a></li>
    {% else %}
      <li style="font-size: 25px;" class="disabled">Page {{ object_list.current_page }} of {{ object_list.totalpages }}<span style="font-size: 50px;">&#8680;</span></li>
    {% endif %}
  </ul>
{% endif %}
</div>

<div class="container p-3 my-3 text-white" id="textBackground">
<ul style="list-style-type:none;">
    <li>
        <h4>Results :</h4>
        <ul style="list-style-type:none;">
            {% for result in object_list.paginator.object_list %}
              <strong>Malware {{ result.0 }}</strong> :<br>
              {% for key,value in result.1.items %}
                {% if key not in object_list.blacklist %}
                  <li>{{ key }} : {{ value }}</li>
                {% endif %}
              {% endfor %}<br>
              <li>
                <p>
                    <a class="btn btn-light btn-sm" data-toggle="collapse" href="#{{ result.0 }}" 
                    role="button" aria-expanded="false" aria-controls="collapseExample">
                      Full Details
                    </a>
                  </p>
                  <div class="collapse" id="{{ result.0 }}">
                    <div class="card card-body bg-secondary">
                      <pre style="color: white;">{{ result.1.jsonstring }}</pre> 
                    </div>
                  </div>
            </li>
            {% endfor %}
        </ul>
    </li>
    <!-- <li>
        <h6>Click <a href="{% url 'download_json' %}">here</a> to download the full json file.</h6>
    </li> -->
</ul>
</div>

{% endblock content %}